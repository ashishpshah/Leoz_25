@model ResponseModel<VendorSubscription>

@{
	ViewBag.Title = "Index";
	Layout = "~/Areas/Admin/Views/Shared/_Layout_Admin.cshtml";
}

<!-- start page title -->
<div class="row">
	<div class="col-12">
		<div class="page-title-box">
			<div class="page-title-right">
			</div>
			<h4 class="page-title">Vendor</h4>
		</div>
	</div>
</div>
<!-- end page title -->

<section class="content">
	<div class="container-fluid">
		<div class="row no-gooters">
			<section class="col-md-12">
				<div class="card card-success card-outline">
					<div class="card-header">
						<h4 class="header-title">Selected Package</h4>
					</div>
					<div class="card-body">
						<div class="row no-gutters">
							<div class="col-md-12 my-1">
								@if (Model.Obj == null)
								{
									<div class="alert alert-danger alert-dismissible">
										<h5><i class="icon fas fa-ban"></i> Alert!</h5>
										You are not subscribe any plan.
									</div>
								}
								else if (Model.Obj != null && Model.Obj.EndDate.Ticks != DateTime.MinValue.Ticks && Model.Obj.EndDate.Ticks < DateTime.Now.Ticks)
								{
									<div class="alert alert-danger alert-dismissible">
										<h5><i class="icon fas fa-ban"></i> Alert!</h5>
										Your subscription plan was expire.
									</div>
								}
								else
								{
									if (Model.Obj != null && Model.Obj.StartDate.Ticks > DateTime.Now.Ticks)
									{
										<div class="alert alert-danger alert-dismissible">
											<h5><i class="icon fas fa-ban"></i> Alert!</h5>
											Your subscription plan is not started.
										</div>
									}

									if (Model.Obj.Selected_Package != null)
									{
										<div class="row">
											<div class="col-sm-4">
												<div class="float-start mt-3">
													<p><b>@Model.Obj.Selected_Package.Name</b></p>
													<p class="text-muted fs-13">@Model.Obj.Selected_Package.Description</p>
												</div>

											</div><!-- end col -->
											<div class="col-sm-3">
												<div class="mt-3 w-50 float-sm-end">
													<p class="fs-13"><strong>Price: </strong> <span class="float-end"> @Model.Obj.Selected_Package.Price</span></p>
													<p class="fs-13">
														<strong>Status: </strong> <span class="badge bg-@(Model.Obj.Selected_Package.IsActive ? "primary" : "danger") float-end">
															@(Model.Obj.Selected_Package.IsActive ? "Active" : "Inactive")
														</span>
													</p>
													<p class="fs-13"><strong>Package for: </strong> <span class="float-end">@(Model.Obj.Selected_Package.IsYearly ? $"{Model.Obj.Selected_Package.DurationInDays} day(s)" : $"{Model.Obj.Selected_Package.ProjectLimit} Project(s)")</span></p>
												</div>
											</div><!-- end col -->
											<div class="col-sm-3">
												<div class="mt-3 w-50 float-sm-end">
													<p class="fs-13"><strong>Start Date: </strong><span class="float-end">@Model.Obj.StartDate.ToString("MMM dd, yyyy")</span></p>
													<p class="fs-13"><strong>End Date: </strong> <span class="float-end">@Model.Obj.EndDate.ToString("MMM dd, yyyy")</span></p>
												</div>
											</div><!-- end col -->
										</div>

									}
								}

							</div>

							<div class="clearfix"></div>
						</div>
					</div>
				</div>
			</section>
			<section class="col-md-12 row">
				@if (Model.Data1 != null)
				{
					var listPackage = (List<Package>)Model.Data1;

					foreach (var package in listPackage)
					{
						<div class="col-md-3">

							<div class="card card-primary card-outline">
								<div class="card-body box-profile">

									<h3 class="profile-username text-center">@package.Name</h3>

									<p class="text-muted text-center">@package.Description</p>

									<ul class="list-group list-group-unbordered mb-3">
										<li class="list-group-item">
											<b>Price</b> <a class="float-right">@package.Price</a>
										</li>
										<li class="list-group-item">
											<b>Duration (In Days)</b> <a class="float-right">@package.DurationInDays</a>
										</li>
										<li class="list-group-item">
											<b>Project Limit</b> <a class="float-right">@package.ProjectLimit</a>
										</li>
									</ul>

									<button class="btn btn-outline-success btn-block w-100"
											onclick="ajaxPost('@Url.Action("Subscribe","VendorSubscription", new {  area = "Admin" })?PackageId=@package.Id')">
										<b>Subscribe</b>
									</button>
								</div>
							</div>
						</div>
					}
				}
			</section>
		</div>
	</div>
</section>

@section Scripts {
	<script type="text/javascript">$(document).ready(function () { });</script>
}