@model ResponseModel<Project>

@{
	ViewBag.Title = "Index";
	Layout = "~/Areas/Admin/Views/Shared/_Layout_Admin.cshtml";

	string ProjectId = Model.SelectListItems.Where(x => x.Group == "P").Count() > 1 ? null : Model.SelectListItems.Where(x => x.Group == "P").Select(x => x.Value).FirstOrDefault();
	long Logged_In_CustomerId = 0;
	try { Logged_In_CustomerId = Common.Get_Session_Int(SessionKey.KEY_IS_CUSTOMER) == 1 ? Common.Get_Session_Int(SessionKey.KEY_USER_ID) : 0; } catch { }
	string CustomerId = null;
	try { CustomerId = Model.SelectListItems.Where(x => x.Group == "C").Count() > 1 ? null : Model.SelectListItems.Where(x => x.Group == "C").Select(x => x.Value).FirstOrDefault(); } catch { }
}

@section Styles {
		<style type="text/css">
			.box {
				cursor: pointer;
				background-color: #f15a07;
				color: white;
				padding: 20px;
				border-radius: 20px;
				font-weight: bold;
				min-height: 120px;
				display: flex;
				flex-direction: column;
				justify-content: center;
			}
		</style>
}

<!-- start page title -->
<div class="row">
	<div class="col-12">
		<div class="page-title-box">
			<h4 class="page-title">Project Detail</h4>
		</div>
	</div>
</div>
<!-- end page title -->


<div class="row">
	<div class="col-12">
		<div class="card">
			<div class="card-header">
				<div class="row no-gutters mb-1">
					<div class="col-sm-4 @(Logged_In_CustomerId > 0 ? "d-none":"")">
						<div class="form-group row d-flex align-items-center">
							<label for="ddlCustomer" class="col-sm-3 col-form-label text-end"> Customer </label>
							<div class="col-sm-9">
								<select id="ddlCustomer" name="CustomerId" class="form-control form-control-sm select2"
										data-selected="@CustomerId" onchange="fnChange_GetProjects(this)">
									<option value="0">-- Select --</option>
									@if (Model.SelectListItems != null)
									{
										foreach (var item in Model.SelectListItems.Where(x => x.Group == "C"))
										{
											if (CustomerId == item.Value)
											{
															<option value="@item.Value" selected>@item.Text</option>
											}
											else
											{
															<option value="@item.Value">@item.Text</option>
											}
										}
									}
								</select>
							</div>
						</div>
					</div>
					<div class="col-sm-6">
						<div class="form-group row d-flex align-items-center">
							<label for="ddlProject" class="col-sm-1 col-form-label text-end"> Project </label>
							<div class="col-sm-10">
								<select id="ddlProject" name="ProjectId" class="form-control form-control-sm select2"
										onchange="fnChange_GetProjectDetails(this)">
									<option value="0">-- Select --</option>
									@if (Model.SelectListItems != null)
									{
										foreach (var item in Model.SelectListItems.Where(x => x.Group == "P"))
										{
											if (ProjectId == item.Value)
											{
															<option value="@item.Value" selected>@item.Text</option>
											}
											else
											{
															<option value="@item.Value">@item.Text</option>
											}
										}
									}
								</select>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="card-body">
				<div class="row no-gutters d-none" id="divProjectDetail">
					<h4 class="header-title">Project Detail</h4>
					<div class="col-md-6 my-1">
						<dl class="row mb-0">

							<dt class="col-sm-3 text-end">Project Name : </dt>
							<dd class="col-sm-9" id="ProjectName"></dd>

							<dt class="col-sm-3 text-end">Description : </dt>
							<dd class="col-sm-9" id="Description"> </dd>

							<dt class="col-sm-3 text-end">Start Date : </dt>
							<dd class="col-sm-9" id="StartDate"></dd>

							<dt class="col-sm-3 text-end">Handover Date : </dt>
							<dd class="col-sm-9" id="HandoverDate"></dd>

							<dt class="col-sm-3 text-end">Address : </dt>
							<dd class="col-sm-9" id="Address"> </dd>

						</dl>
					</div>

					<div class="col-md-6 my-1">
						<dl class="row mb-0">
							<dt class="col-sm-3 text-end">Coordinator : </dt>
							<dd class="col-sm-9" id="Coordinator"></dd>

							<dt class="col-sm-3 text-end">Site Detail : </dt>
							<dd class="col-sm-9" id="SiteDetail"> </dd>

							<dt class="col-sm-3 text-end">Status : </dt>
							<dd class="col-sm-9" id="Status"></dd>

							<dt class="col-sm-3 text-end">&nbsp;</dt>
							<dd class="col-sm-9">&nbsp;</dd>

							<dt class="col-sm-3 text-end">Location Link : </dt>
							<dd class="col-sm-9" id="LocationLink">&nbsp;</dd>
						</dl>
					</div>

					<div class="clearfix"></div>
				</div>

				<div class="row d-flex align-items-center justify-content-center mt-4 d-none" id="divProjectDetailOption">
					<div class="col-10">
						<div class="container py-5">
							<div class="row g-4">
								<div class="col-md-4">
									<div class="box text-center d-flex align-items-center justify-content-center" data-type="EPM" data-active="false">
										<p class="mb-1">Estimate</p>
										<p class="mb-1">Payment Terms</p>
										<p class="mb-0">Material Specifications</p>
									</div>
								</div>

								<div class="col-md-4">
									<div class="box text-center d-flex align-items-center justify-content-center" data-type="F3D" data-active="false">FINAL 3D</div>
								</div>

								<div class="col-md-4">
									<div class="box text-center d-flex align-items-center justify-content-center" data-type="DRW" data-active="false">DRAWINGS</div>
								</div>

								<div class="col-md-4">
									<div class="box text-center d-flex align-items-center justify-content-center" data-type="WCLTSC" data-active="false">CLIENT SCOPE OF WORK</div>
								</div>

								<div class="col-md-4">
									<div class="box text-center d-flex align-items-center justify-content-center" data-type="MB" data-active="false">MOOD BOARD</div>
								</div>

								<div class="col-md-4">
									<div class="box text-center d-flex align-items-center justify-content-center" data-type="SITE" data-active="false">SITE UPDATES</div>
								</div>

								<div class="col-md-4">
									<div class="box text-center d-flex align-items-center justify-content-center" data-type="WPEND" data-active="false">PENDING SELECTION & WORK</div>
								</div>

								<div class="col-md-4">
									<div class="box text-center d-flex align-items-center justify-content-center" data-type="MPRO" data-active="false">MATERIAL PROCUREMENT</div>
								</div>

								<div class="col-md-4">
									<div class="box text-center d-flex align-items-center justify-content-center" data-type="WCOMP" data-active="false">WORK COMPLITION REPORT</div>
								</div>

							</div>
						</div>
					</div>
				</div>

			</div> <!-- end card body-->
		</div> <!-- end card -->
	</div><!-- end col-->
</div> <!-- end row-->
@section Scripts {
		<script type="text/javascript">
			$(document).ready(function () {

				let change = '@(Logged_In_CustomerId > 0 ? "1" : "")'

				if (typeof change != 'undefined' && change != null && change != '' && !isNaN(parseInt(change)) && parseInt(change) > 0)
					$("#ddlProject").trigger('change');

				$('.box').on('click', function () {
					ShowLoader(true);

					const _this = $(this);

					$('.box').attr('data-active', false);
					$(this).attr('data-active', true);

					const boxType = _this.attr('data-type').trim();

					fnOpenModal(boxType);
				});

			});

			function fnOpenModal(boxType) {
				ShowLoader(true);

				var CustomerId = $('#ddlCustomer option:selected').val();
				var ProjectId = $('#ddlProject option:selected').val();
				if ((typeof CustomerId != 'undefined' && CustomerId != null && CustomerId != '' && !isNaN(parseInt(CustomerId)) && parseInt(CustomerId) > 0)
					|| (typeof change != 'undefined' && change != null && change != '' && !isNaN(parseInt(change)) && parseInt(change) > 0)) {
					if (typeof ProjectId != 'undefined' && ProjectId != null && ProjectId != '' && !isNaN(parseInt(ProjectId)) && parseInt(ProjectId) > 0) { }
					else { ShowLoader(false); CommonAlert_Error('Please select Project', null); return false; }
				}
				else { ShowLoader(false); CommonAlert_Error('Please select Customer', null); return false; }

				var title = 'Estimate Payment Terms Material Specifications List (Customer)';

				if (boxType == 'EPM') title = 'Estimate Payment Terms Material Specifications List (Customer)';
				else if (boxType == 'F3D') title = 'FINAL 3D';
				else if (boxType == 'DRW') title = 'DRAWINGS';
				else if (boxType == 'WCLTSC') title = 'CLIENT SCOPE OF WORK';
				else if (boxType == 'MB') title = 'MOOD BOARD';
				else if (boxType == 'SITE') title = 'SITE UPDATES';
				else if (boxType == 'WPEND') title = 'PENDING SELECTION & WORK';
				else if (boxType == 'MPRO') title = 'MATERIAL PROCUREMENT';
				else if (boxType == 'WCOMP') title = 'WORK COMPLITION REPORT';

				var $url = "@Url.Action("Partial_AddEditForm_Doc", "Project", new { area = "Admin" })?CustomerId=" + CustomerId + "&ProjectId=" + ProjectId + "&Type=" + boxType;

				if (boxType == 'WPEND') $url = "@Url.Action("Partial_AddEditForm_WP", "Project", new { area = "Admin" })?CustomerId=" + CustomerId + "&ProjectId=" + ProjectId + "&Type=" + boxType;
				else if (boxType == 'MPRO') $url = "@Url.Action("Partial_AddEditForm_MP", "Project", new { area = "Admin" })?CustomerId=" + CustomerId + "&ProjectId=" + ProjectId + "&Type=" + boxType;
				else if (boxType == 'WCOMP') $url = "@Url.Action("Partial_AddEditForm_WC", "Project", new { area = "Admin" })?CustomerId=" + CustomerId + "&ProjectId=" + ProjectId + "&Type=" + boxType;

				fnShow_Modal($url, title, false, 'html', false, false, false);

				ShowLoader(false);
			}

			function fnShow_Modal_Success($url, $title) {

				$('#largeModal .modal-dialog').addClass('modal-fullscreen');
				$('#largeModal').css('display', 'block');
				$('#largeModal .modal-body #divProjectSiteDoc').css('display', 'none');
				$('#largeModal .modal-footer').css('display', 'none');
				$('#largeModal .modal-body .btn-add').css('display', 'block');
			}

			function fnChangeStatus_ProjectSiteDoc($id, $status) {

				if (typeof $id != 'undefined' && $id != null && parseInt($id) > 0) {

					var CustomerId = $('#ddlCustomer option:selected').val();
					var ProjectId = $('#ddlProject option:selected').val();
					if ((typeof CustomerId != 'undefined' && CustomerId != null && CustomerId != '' && !isNaN(parseInt(CustomerId)) && parseInt(CustomerId) > 0)
						|| (typeof change != 'undefined' && change != null && change != '' && !isNaN(parseInt(change)) && parseInt(change) > 0)) {
						if (typeof ProjectId != 'undefined' && ProjectId != null && ProjectId != '' && !isNaN(parseInt(ProjectId)) && parseInt(ProjectId) > 0) { }
						else { ShowLoader(false); CommonAlert_Error('Please select Project', null); return false; }
					}
					else { ShowLoader(false); CommonAlert_Error('Please select Customer', null); return false; }

					let boxType = $($('.box[data-active="true"]')).attr('data-type').trim();

					if (boxType == 'WPEND') boxType = "WP" ;
					else if (boxType == 'MPRO') boxType = "MP";
					else if (boxType == 'WCOMP') boxType = "WC";
					else boxType = "DOC";

					var $url = "@Url.Action("Save_Doc_Status", "Project", new { area = "Admin" })?CustomerId=" + CustomerId + "&ProjectId=" + ProjectId + "&Id=" + $id + "&Type=" + boxType + "&Status=" + $status;

					ShowLoader(true);

					ajaxPost($url, null);
				}
			}


			function fnAddEdit_ProjectSiteDoc($id) {
				$('#largeModal .modal-body #divProjectSiteDoc form input').val(null).trigger('change');
				$('#largeModal .modal-body #divProjectSiteDoc form select').val(null).trigger('change');
				$('#largeModal .modal-body #divProjectSiteDoc').css('display', 'block');
				$('#largeModal .modal-body .btn-add').css('display', 'none');

				$('#largeModal .modal-body #divProjectSiteDoc form input[name="UploadDate_Text"]').prop('readonly', false);

				if (typeof $id != 'undefined' && $id != null && parseInt($id) > 0) {

					var CustomerId = $('#ddlCustomer option:selected').val();
					var ProjectId = $('#ddlProject option:selected').val();
					if ((typeof CustomerId != 'undefined' && CustomerId != null && CustomerId != '' && !isNaN(parseInt(CustomerId)) && parseInt(CustomerId) > 0)
						|| (typeof change != 'undefined' && change != null && change != '' && !isNaN(parseInt(change)) && parseInt(change) > 0)) {
						if (typeof ProjectId != 'undefined' && ProjectId != null && ProjectId != '' && !isNaN(parseInt(ProjectId)) && parseInt(ProjectId) > 0) { }
						else { ShowLoader(false); CommonAlert_Error('Please select Project', null); return false; }
					}
					else { ShowLoader(false); CommonAlert_Error('Please select Customer', null); return false; }

					var $url = "@Url.Action("Partial_AddEditForm_Doc", "Project", new { area = "Admin" })?CustomerId=" + CustomerId + "&ProjectId=" + ProjectId + "&ProjectSiteDocId=" + $id;

					ShowLoader(true);

					$.ajax({
						type: 'GET',
						url: $url,
						data: null,
						cache: false,
						contentType: false,
						processData: false,
						dataType: "json",
						success: function (response) {
							try {
								ShowLoader(false);
								if (typeof response != 'undefined' && response != null && response != '') {
									$('#formSave input[name="Id"]').val(response['Id']).trigger('change');
									$('#formSave input[name="ProjectId"]').val(response['ProjectId']).trigger('change');
									$('#formSave input[name="CustomerId"]').val(response['CustomerId']).trigger('change');
									$('#formSave input[name="Type"]').val(response['Type']).trigger('change');

									$('#formSave input[name="UploadDate_Text"]').val(response['UploadDate_Text']).trigger('change');
									$('#formSave input[name="Remark"]').val(response['Remark']).trigger('change');

									$('#largeModal .modal-body #divProjectSiteDoc form input[name="UploadDate_Text"]').prop('readonly', true);
								}
								else {
									ShowLoader(false); CommonAlert_Error(response.Message, null);
								}
							} catch { ShowLoader(false); window.location.reload(); }
						},
						failure: function (response) { ShowLoader(false); CommonAlert_Error(null) },
						error: function (response) { ShowLoader(false); CommonAlert_Error(null) }
					});
				}
			}

			function fnAddEdit_ProjectSiteMP($id) {
				$('#largeModal .modal-body #divProjectSiteDoc form input').val(null).trigger('change');
				$('#largeModal .modal-body #divProjectSiteDoc form select').val(null).trigger('change');
				$('#largeModal .modal-body #divProjectSiteDoc').css('display', 'block');
				$('#largeModal .modal-body .btn-add').css('display', 'none');

				if (typeof $id != 'undefined' && $id != null && parseInt($id) > 0) {

					var CustomerId = $('#ddlCustomer option:selected').val();
					var ProjectId = $('#ddlProject option:selected').val();
					if ((typeof CustomerId != 'undefined' && CustomerId != null && CustomerId != '' && !isNaN(parseInt(CustomerId)) && parseInt(CustomerId) > 0)
						|| (typeof change != 'undefined' && change != null && change != '' && !isNaN(parseInt(change)) && parseInt(change) > 0)) {
						if (typeof ProjectId != 'undefined' && ProjectId != null && ProjectId != '' && !isNaN(parseInt(ProjectId)) && parseInt(ProjectId) > 0) { }
						else { ShowLoader(false); CommonAlert_Error('Please select Project', null); return false; }
					}
					else { ShowLoader(false); CommonAlert_Error('Please select Customer', null); return false; }

					var $url = "@Url.Action("Partial_AddEditForm_MP", "Project", new { area = "Admin" })?CustomerId=" + CustomerId + "&ProjectId=" + ProjectId + "&ProjectSiteMatId=" + $id;

					ShowLoader(true);

					$.ajax({
						type: 'GET',
						url: $url,
						data: null,
						cache: false,
						contentType: false,
						processData: false,
						dataType: "json",
						success: function (response) {
							try {
								ShowLoader(false);
								if (typeof response != 'undefined' && response != null && response != '') {

									$('#formSave input[name="Id"]').val(response['Id']).trigger('change');
									$('#formSave input[name="ProjectId"]').val(response['ProjectId']).trigger('change');
									$('#formSave input[name="CustomerId"]').val(response['CustomerId']).trigger('change');

									$('#formSave input[name="MaterialFor"]').val(response['MaterialFor']).trigger('change');
									$('#formSave input[name="MaterialName"]').val(response['MaterialName']).trigger('change');
									$('#formSave input[name="Qty"]').val(response['Qty']).trigger('change');
									$('#formSave select[name="UOM"]').val(response['UOM']).trigger('change');
								}
								else {
									ShowLoader(false); CommonAlert_Error(response.Message, null);
								}
							} catch { ShowLoader(false); window.location.reload(); }
						},
						failure: function (response) { ShowLoader(false); CommonAlert_Error(null) },
						error: function (response) { ShowLoader(false); CommonAlert_Error(null) }
					});
				}
			}

			function fnAddEdit_ProjectSiteWP($id) {
				$('#largeModal .modal-body #divProjectSiteDoc form input').val(null).trigger('change');
				$('#largeModal .modal-body #divProjectSiteDoc form select').val(null).trigger('change');
				$('#largeModal .modal-body #divProjectSiteDoc').css('display', 'block');
				$('#largeModal .modal-body .btn-add').css('display', 'none');

				$('#largeModal .modal-body #divProjectSiteDoc form input[name="UploadDate_Text"]').prop('readonly', false);

				if (typeof $id != 'undefined' && $id != null && parseInt($id) > 0) {

					var CustomerId = $('#ddlCustomer option:selected').val();
					var ProjectId = $('#ddlProject option:selected').val();
					if ((typeof CustomerId != 'undefined' && CustomerId != null && CustomerId != '' && !isNaN(parseInt(CustomerId)) && parseInt(CustomerId) > 0)
						|| (typeof change != 'undefined' && change != null && change != '' && !isNaN(parseInt(change)) && parseInt(change) > 0)) {
						if (typeof ProjectId != 'undefined' && ProjectId != null && ProjectId != '' && !isNaN(parseInt(ProjectId)) && parseInt(ProjectId) > 0) { }
						else { ShowLoader(false); CommonAlert_Error('Please select Project', null); return false; }
					}
					else { ShowLoader(false); CommonAlert_Error('Please select Customer', null); return false; }

					var $url = "@Url.Action("Partial_AddEditForm_WP", "Project", new { area = "Admin" })?CustomerId=" + CustomerId + "&ProjectId=" + ProjectId + "&ProjectSitePendingWorkId=" + $id;

					ShowLoader(true);

					$.ajax({
						type: 'GET',
						url: $url,
						data: null,
						cache: false,
						contentType: false,
						processData: false,
						dataType: "json",
						success: function (response) {
							try {
								ShowLoader(false);
								if (typeof response != 'undefined' && response != null && response != '') {

									$('#formSave input[name="Id"]').val(response['Id']).trigger('change');
									$('#formSave input[name="ProjectId"]').val(response['ProjectId']).trigger('change');
									$('#formSave input[name="CustomerId"]').val(response['CustomerId']).trigger('change');

									$('#formSave input[name="UploadDate_Text"]').val(response['UploadDate_Text']).trigger('change');
									$('#formSave input[name="PendingFrom"]').val(response['PendingFrom']).trigger('change');
									$('#formSave input[name="Remarks"]').val(response['Remarks']).trigger('change');
									$('#formSave input[name="PendingPoint"]').val(response['PendingPoint']).trigger('change');

									$('#largeModal .modal-body #divProjectSiteDoc form input[name="UploadDate_Text"]').prop('readonly', true);
								}
								else {
									ShowLoader(false); CommonAlert_Error(response.Message, null);
								}
							} catch { ShowLoader(false); window.location.reload(); }
						},
						failure: function (response) { ShowLoader(false); CommonAlert_Error(null) },
						error: function (response) { ShowLoader(false); CommonAlert_Error(null) }
					});
				}
			}

			function fnClose_ProjectSiteDoc() {
				$('#largeModal .modal-body #divProjectSiteDoc form input').val(null).trigger('change');
				$('#largeModal .modal-body #divProjectSiteDoc form select').val(null).trigger('change');
				$('#largeModal .modal-body #divProjectSiteDoc').css('display', 'none');
				$('#largeModal .modal-body .btn-add').css('display', 'block');
			}

			function fnSubmitForm_Success(response, $id) {

				try {
					if (response.StatusCode === 1) {
						const boxType = $($('.box[data-active="true"]')).attr('data-type').trim();
						fnOpenModal(boxType);
					}
					else CommonAlert_Error(response.Message, null);

				} catch { fnClose_ProjectSiteDoc(); }
			}

			function fnDelete_Success(response) {

				try {
					if (response.StatusCode === 1) {
						const boxType = $($('.box[data-active="true"]')).attr('data-type').trim();
						fnOpenModal(boxType);
					}
					else CommonAlert_Error(response.Message, null);
				} catch { fnClose_ProjectSiteDoc(); }
			}

			function fnChange_GetProjects($this) {

				$('#divProjectDetail dd').text('');
				$('#divProjectDetail').addClass('d-none');
				$('#divProjectDetailOption').addClass('d-none');

				var CustomerId = $($this).find('option:selected').val();

				if (typeof CustomerId != 'undefined' && CustomerId != null && CustomerId != '' && !isNaN(parseInt(CustomerId)) && parseInt(CustomerId) > 0) {

					var ddlProject = $("#ddlProject");
					ddlProject.empty();
					ddlProject.append('<option value="0">-- Select --</option>');

					ShowLoader(true);
					$.ajax({
						type: "POST",
						url: "@Url.Action("GetProjectByCustomerId", "Project", new { area = "Admin" })?CustomerId=" + CustomerId,
						data: {},
						cache: false,
						contentType: false,
						processData: false,
						dataType: "json",
						success: function (response) {
							ShowLoader(false);

							if (response != null && response.length > 0) {
								$.each(response, function () {
									ddlProject.append($("<option></option>").val(this['Value']).html(this['Text']));
								});
							}

							$("#ddlProject").trigger('change');
							$("#ddlProject").select2();
						},
						failure: function (xhr) {
							ShowLoader(false);
							console.log('error : ' + xhr.status + ' - ' + xhr.statusText + ' - ' + xhr.responseText);
						},
						error: function (xhr) {
							ShowLoader(false);
							console.log('error : ' + xhr.status + ' - ' + xhr.statusText + ' - ' + xhr.responseText);
						}
					});
				}
			}

			function fnChange_GetProjectDetails($this) {

				$('#divProjectDetail dd').text('');
				$('#divProjectDetail').addClass('d-none');
				$('#divProjectDetailOption').addClass('d-none');

				var CustomerId = $('#ddlCustomer option:selected').val();
				var ProjectId = $($this).find('option:selected').val();

				if (typeof ProjectId != 'undefined' && ProjectId != null && ProjectId != '' && !isNaN(parseInt(ProjectId)) && parseInt(ProjectId) > 0) {

					ShowLoader(true);
					$.ajax({
						type: "POST",
						url: "@Url.Action("GetProjectDetail", "Project", new { area = "Admin" })?CustomerId=" + CustomerId + "&ProjectId=" + ProjectId,
						data: {},
						cache: false,
						contentType: false,
						processData: false,
						dataType: "json",
						success: function (response) {
							ShowLoader(false);

							if (response != null) {

								$('#ProjectName').text(response['Name']);
								$('#Description').text(response['Description']);
								$('#StartDate').text(response['StartDate_Text']);
								$('#HandoverDate').text(response['HandoverDate_Text']);
								$('#Address').text(response['Address']);

								$('#Coordinator').text(response['CoordinatorName']);
								$('#SiteDetail').text(response['SiteDetails']);
								$('#Status').text((response['IsActive'] == true ? 'Active' : 'Inactive'));
								$('#LocationLink').text(response['LocationLink']);

								$('#divProjectDetail').removeClass('d-none');
								$('#divProjectDetailOption').removeClass('d-none');
							}
						},
						failure: function (xhr) {
							ShowLoader(false);
							console.log('error : ' + xhr.status + ' - ' + xhr.statusText + ' - ' + xhr.responseText);
						},
						error: function (xhr) {
							ShowLoader(false);
							console.log('error : ' + xhr.status + ' - ' + xhr.statusText + ' - ' + xhr.responseText);
						}
					});
				}

			}

		</script>
}